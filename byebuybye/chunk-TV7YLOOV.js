import{a as b,b as Y,c as z,e as B,f as A}from"./chunk-AXFDJPD5.js";import{a as R}from"./chunk-QXHB2BIB.js";import{q as $}from"./chunk-KH7ATXE2.js";import{Ca as f,Db as H,Eb as k,Fb as _,Gb as F,Na as u,Oa as y,Pa as v,Qa as P,Ra as S,Sa as d,Ta as i,Ua as c,Va as p,X as M,Y as O,Za as w,_a as T,ab as l,hb as E,jb as o,kb as s,lb as I,mb as N,ob as m,pb as g,qb as D,sa as r,ub as x}from"./chunk-NDTBUUH6.js";var C=class n{label=x.required();amount=x.required();type=x("saved");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-moneybox"]],inputs:{label:[1,"label"],amount:[1,"amount"],type:[1,"type"]},decls:7,vars:5,consts:[[1,"money-box-card",3,"ngClass"],[1,"label"],[1,"amount"]],template:function(t,a){t&1&&(i(0,"mat-card",0)(1,"mat-card-content")(2,"div",1),o(3),c(),i(4,"div",2),o(5),m(6,"currency"),c()()()),t&2&&(d("ngClass",a.type()),r(3),s(a.label()),r(2),s(g(6,3,a.amount())))},dependencies:[H,A,b,z,_],styles:["[_nghost-%COMP%]{display:block;margin:10px auto;width:90%;max-width:400px}.money-box-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px!important;text-align:center}.label[_ngcontent-%COMP%]{font-size:.9rem;color:#666;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}.amount[_ngcontent-%COMP%]{font-size:2rem;font-weight:800}.money-box-card[_ngcontent-%COMP%]{border-radius:12px;transition:transform .2s ease;border-left:8px solid transparent}.saved[_ngcontent-%COMP%]{border-left-color:#4caf50!important;background-color:#f1f8e9!important}.saved[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#2e7d32}.spent[_ngcontent-%COMP%]{border-left-color:#f44336!important;background-color:#ffebee!important}.spent[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#c62828}"]})};function J(n,e){if(n&1&&p(0,"app-moneybox",1),n&2){let t=l();d("amount",t.totalSaved)}}function q(n,e){if(n&1&&p(0,"app-moneybox",2),n&2){let t=l();d("amount",t.totalSpent)}}function L(n,e){if(n&1&&(o(0," You SPENT "),i(1,"strong"),o(2),m(3,"currency"),c()),n&2){let t=l().$implicit;r(2),s(g(3,1,t.price))}}function Q(n,e){if(n&1&&(o(0," You SAVED "),i(1,"strong"),o(2),m(3,"currency"),c()),n&2){let t=l().$implicit;r(2),s(g(3,1,t.price))}}function U(n,e){if(n&1){let t=w();i(0,"mat-card",7)(1,"mat-card-header")(2,"mat-card-title"),u(3,L,4,3)(4,Q,4,3),o(5),m(6,"date"),p(7,"br"),i(8,"small"),o(9),c()(),i(10,"button",8),T("click",function(){let h=M(t).$index,G=l();return O(G.deleteDecision(h))}),i(11,"mat-icon"),o(12,"delete"),c()()()()}if(n&2){let t=e.$implicit;E("bought-card",t.bought)("saved-card",!t.bought),r(3),y(t.bought?3:4),r(2),I(" on ",D(6,8,t.date,"yyyy-MM-dd"),"! "),r(4),N(" ",t.itemName?t.itemName:"Item"," = ",t.formattedTime," of work. ")}}function W(n,e){n&1&&(i(0,"p",5),o(1,'No history yet. Start by adding items in the "New" tab!'),c())}var j=class n{decisions=[];totalSaved=0;totalSpent=0;STORAGE_KEY="purchase_decisions";ngOnInit(){this.loadHistory()}loadHistory(){let e=localStorage.getItem(this.STORAGE_KEY);e&&(this.decisions=JSON.parse(e).reverse(),this.calculateTotals())}calculateTotals(){this.totalSaved=this.decisions.filter(e=>!e.bought).reduce((e,t)=>e+Number(t.price||0),0),this.totalSpent=this.decisions.filter(e=>e.bought).reduce((e,t)=>e+Number(t.price||0),0)}deleteDecision(e){let t=localStorage.getItem(this.STORAGE_KEY);if(t){let a=JSON.parse(t),h=a.length-1-e;a.splice(h,1),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a)),this.loadHistory()}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-history"]],decls:10,vars:3,consts:[[1,"history-header-container"],["label","Total money saved","type","saved",3,"amount"],["label","Total money spent","type","spent",3,"amount"],[1,"cards-list"],["appearance","outlined",1,"money-card",3,"bought-card","saved-card"],[1,"empty-msg"],[1,"bottom-spacer"],["appearance","outlined",1,"money-card"],["mat-icon-button","",1,"delete-btn",3,"click"]],template:function(t,a){t&1&&(i(0,"div",0)(1,"h1"),o(2,"Your History"),c(),u(3,J,1,1,"app-moneybox",1),u(4,q,1,1,"app-moneybox",2),i(5,"div",3),P(6,U,13,11,"mat-card",4,v,!1,W,2,0,"p",5),c()(),p(9,"div",6)),t&2&&(r(3),y(a.totalSaved>0?3:-1),r(),y(a.totalSpent>0?4:-1),r(2),S(a.decisions))},dependencies:[F,b,B,Y,R,$,C,_,k],styles:["[_nghost-%COMP%]{display:block;width:100%}.money-card[_ngcontent-%COMP%]{width:95vw}.money-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;padding:8px 16px;box-sizing:border-box}  .money-card .mat-card-header-text{margin:0!important;display:flex;align-items:center}.money-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0!important;line-height:1}.delete-btn[_ngcontent-%COMP%]{margin-left:auto;display:flex!important;align-items:center;justify-content:center;width:40px!important;height:40px!important}.delete-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0!important}h1[_ngcontent-%COMP%]{text-align:center;width:100%;margin:16px 0;font-family:Roboto,sans-serif}.history-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;gap:12px;padding:20px 0 100px}.cards-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:12px;padding-bottom:20px}.money-card[_ngcontent-%COMP%]{width:90vw;max-width:500px}.saved-card[_ngcontent-%COMP%]{border-left:5px solid #4caf50}.bought-card[_ngcontent-%COMP%]{border-left:5px solid #f44336;opacity:.8}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#666;margin-top:2rem}.bottom-spacer[_ngcontent-%COMP%]{height:80px;width:100%}mat-card-title[_ngcontent-%COMP%]{font-size:1rem!important;font-weight:400!important}mat-card-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem}mat-card-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}"]})};export{j as History};
