import{a as xe,b as De}from"./chunk-QORNORT3.js";import{a as ve,c as we,d as ye,e as Me}from"./chunk-Q4VWBOSX.js";import{a as Ee,b as Re}from"./chunk-T2HF554B.js";import{a as _e,b as x}from"./chunk-QXHB2BIB.js";import{b as Ce,f as Se,r as Te,s as D}from"./chunk-KH7ATXE2.js";import{A as g,Ca as b,Da as V,Ea as te,Gb as ge,I as M,Ib as be,Ja as oe,L as h,La as j,M as H,Na as re,O as I,Oa as ne,P as A,R as Q,S as P,Sa as ie,T as s,Ta as l,U as J,Ua as c,Va as ae,X as U,Y as F,Z as G,Za as se,_ as Z,_a as le,a as C,ab as T,b as z,bb as ce,ca as q,cb as B,db as me,e as _,f as S,fa as $,fb as de,ga as L,gb as pe,hb as ue,ib as fe,jb as p,la as X,n as f,sa as ee,u,v as y,vb as he}from"./chunk-NDTBUUH6.js";var Oe=[{path:"",loadComponent:()=>import("./chunk-CDYBEOOH.js").then(r=>r.New)},{path:"history",loadComponent:()=>import("./chunk-TV7YLOOV.js").then(r=>r.History)},{path:"profile",loadComponent:()=>import("./chunk-3KL25YVB.js").then(r=>r.Home)},{path:"new",loadComponent:()=>import("./chunk-CDYBEOOH.js").then(r=>r.New)},{path:"reminders",loadComponent:()=>import("./chunk-6N2NC4LR.js").then(r=>r.Reminders)}];var W="Service workers are disabled or not supported by this browser",v=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new _(t=>t.error(new h(5601,!1)));else{let t=null,o=new S;this.worker=new _(d=>(t!==null&&d.next(t),o.subscribe(R=>d.next(R))));let i=()=>{let{controller:d}=n;d!==null&&(t=d,o.next(t))};n.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(M(()=>n.getRegistration().then(d=>{if(!d)throw new h(5601,!1);return d})));let a=new S;this.events=a.asObservable();let m=d=>{let{data:R}=d;R?.type&&a.next(R)};n.addEventListener("message",m),e?.get(j,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",i),n.removeEventListener("message",m)})}}postMessage(n,e){return new Promise(t=>{this.worker.pipe(g(1)).subscribe(o=>{o.postMessage(C({action:n},e)),t()})})}postMessageWithOperation(n,e,t){let o=this.waitForOperationCompleted(t),i=this.postMessage(n,e);return Promise.all([i,o]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let e;return typeof n=="string"?e=t=>t.type===n:e=t=>n.includes(t.type),this.events.pipe(y(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(g(1))}waitForOperationCompleted(n){return new Promise((e,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(y(o=>o.nonce===n),g(1),f(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).subscribe({next:e,error:t})})}get isEnabled(){return!!this.serviceWorker}},Ue=(()=>{class r{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new S;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=u,this.notificationClicks=u,this.notificationCloses=u,this.pushSubscriptionChanges=u,this.subscription=u;return}this.messages=this.sw.eventsOfType("PUSH").pipe(f(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(f(o=>o.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(f(o=>o.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(f(o=>o.data)),this.pushManager=this.sw.registration.pipe(f(o=>o.pushManager));let t=this.pushManager.pipe(M(o=>o.getSubscription()));this.subscription=new _(o=>{let i=t.subscribe(o),a=this.subscriptionChanges.subscribe(o);return()=>{i.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(W));let t={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)i[a]=o.charCodeAt(a);return t.applicationServerKey=i,new Promise((a,m)=>{this.pushManager.pipe(M(w=>w.subscribe(t)),g(1)).subscribe({next:w=>{this.subscriptionChanges.next(w),a(w)},error:m})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(W));let e=t=>{if(t===null)throw new h(5602,!1);return t.unsubscribe().then(o=>{if(!o)throw new h(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,o)=>{this.subscription.pipe(g(1),M(e)).subscribe({next:t,error:o})})}decodeBase64(e){return atob(e)}static \u0275fac=function(t){return new(t||r)(P(v))};static \u0275prov=I({token:r,factory:r.\u0275fac})}return r})(),Y=(()=>{class r{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=u,this.unrecoverable=u;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(W));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new h(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(t){return new(t||r)(P(v))};static \u0275prov=I({token:r,factory:r.\u0275fac})}return r})(),ke=new Q("");function Fe(){let r=s(E);if(!("serviceWorker"in navigator&&r.enabled!==!1))return;let n=s(ke),e=s(q),t=s(j);e.runOutsideAngular(()=>{let o=navigator.serviceWorker,i=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",i),t.onDestroy(()=>{o.removeEventListener("controllerchange",i)})}),e.runOutsideAngular(()=>{let o,{registrationStrategy:i}=r;if(typeof i=="function")o=new Promise(a=>i().subscribe(()=>a()));else{let[a,...m]=(i||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Promise.resolve();break;case"registerWithDelay":o=Ne(+m[0]||0);break;case"registerWhenStable":o=Promise.race([t.whenStable(),Ne(+m[0])]);break;default:throw new h(5600,!1)}}o.then(()=>{t.destroyed||navigator.serviceWorker.register(n,{scope:r.scope,updateViaCache:r.updateViaCache,type:r.type}).catch(a=>console.error(H(5604,!1)))})})}function Ne(r){return new Promise(n=>setTimeout(n,r))}function Le(){let r=s(E),n=s(G),e=!0;return new v(e&&r.enabled!==!1?navigator.serviceWorker:void 0,n)}var E=class{enabled;updateViaCache;type;scope;registrationStrategy};function Ie(r,n={}){return J([Ue,Y,{provide:ke,useValue:r},{provide:E,useValue:n},{provide:v,useFactory:Le},oe(Fe)])}var Ae={providers:[$(),Me(Oe),Ie("ngsw-worker.js",{enabled:!he(),registrationStrategy:"registerImmediately"})]};var Ve=["*",[["mat-toolbar-row"]]],je=["*","mat-toolbar-row"],Be=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275dir=te({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return r})(),Pe=(()=>{class r{_elementRef=s(X);_platform=s(Se);_document=s(Z);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=b({type:r,selectors:[["mat-toolbar"]],contentQueries:function(t,o,i){if(t&1&&me(i,Be,5),t&2){let a;de(a=pe())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(t,o){t&2&&(fe(o.color?"mat-"+o.color:""),ue("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:je,decls:2,vars:0,template:function(t,o){t&1&&(ce(Ve),B(0),B(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return r})();var O=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=V({type:r});static \u0275inj=A({imports:[Ce]})}return r})();var N=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-selector"]],decls:25,vars:0,consts:[["color","primary",1,"bottom-nav"],["mat-button","","routerLink","/reminders","routerLinkActive","active"],[1,"selector-container"],[1,"selector-icon"],[1,"selector-label"],["mat-button","","routerLink","/history","routerLinkActive","active"],["mat-button","","routerLink","/new","routerLinkActive","active"],["mat-button","","routerLink","/profile","routerLinkActive","active"]],template:function(e,t){e&1&&(l(0,"mat-toolbar",0)(1,"a",1)(2,"div",2)(3,"mat-icon",3),p(4,"alarm"),c(),l(5,"span",4),p(6,"Reminders"),c()()(),l(7,"a",5)(8,"div",2)(9,"mat-icon",3),p(10,"history"),c(),l(11,"span",4),p(12,"History"),c()()(),l(13,"a",6)(14,"div",2)(15,"mat-icon",3),p(16,"add"),c(),l(17,"span",4),p(18,"New"),c()()(),l(19,"a",7)(20,"div",2)(21,"mat-icon",3),p(22,"account_circle"),c(),l(23,"span",4),p(24,"Profile"),c()()()())},dependencies:[O,Pe,D,Te,x,_e,we,ye],styles:[".bottom-nav[_ngcontent-%COMP%]{height:100%!important;width:100%;display:flex;justify-content:space-around;padding:0}.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#00bcd4!important;color:#fff!important}.selector-icon[_ngcontent-%COMP%]{font-size:24px;text-align:center}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-of-type{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{border-top-right-radius:0!important;border-bottom-right-radius:0!important}"]})};function Ye(r,n){if(r&1){let e=se();l(0,"app-decision-modal",2),le("decision",function(o){U(e);let i=T();return F(i.resolveReminder(o))})("close",function(){let o=U(e),i=T();return F(i.snoozeReminder(o))}),c()}if(r&2){let e=n,t=T();ie("itemName",e.itemName)("humanReadableTime",e.formattedTime)("futureValue",t.futureValue)("yearsToRetirement",t.yearsToRetirement)}}var k=class r{title=L("byebuybye");updates=s(Y);snackBar=s(xe);activeReminder=L(null);futureValue=0;yearsToRetirement=0;reminderQueue=[];REMINDERS_KEY="purchase_reminders";DECISIONS_KEY="purchase_decisions";PROFILE_KEY="user_financial_profile";constructor(){this.checkForUpdates(),this.startReminderCheck()}startReminderCheck(){setInterval(()=>{let n=localStorage.getItem(this.REMINDERS_KEY);if(!n)return;let e=JSON.parse(n),t=new Date,o=e.filter(i=>new Date(i.remindAt)<=t);if(o.length>0){let i=e.filter(a=>new Date(a.remindAt)>t);localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(i)),this.reminderQueue.push(...o),this.showNextReminder()}},5e3)}showNextReminder(){if(!this.activeReminder()&&this.reminderQueue.length>0){let n=this.reminderQueue.shift();this.calculateOpportunityCost(n.price),this.activeReminder.set(n)}}calculateOpportunityCost(n){let e=JSON.parse(localStorage.getItem(this.PROFILE_KEY)||"{}"),t=(e.investmentReturn||7)/100;if(e.birthDate&&e.retirementAge){let o=new Date(e.birthDate),i=new Date,a=i.getFullYear()-o.getFullYear(),m=i.getMonth()-o.getMonth();(m<0||m===0&&i.getDate()<o.getDate())&&a--,this.yearsToRetirement=e.retirementAge-a,this.yearsToRetirement>0?this.futureValue=n*Math.pow(1+t,this.yearsToRetirement):this.futureValue=0}}resolveReminder(n){let e=this.activeReminder();if(!e)return;let t=JSON.parse(localStorage.getItem(this.DECISIONS_KEY)||"[]");t.push({itemName:e.itemName,price:e.price,hours:e.hours,formattedTime:e.formattedTime,bought:n,date:new Date().toISOString()}),localStorage.setItem(this.DECISIONS_KEY,JSON.stringify(t)),n||Ee({particleCount:150,spread:70,origin:{y:.6},colors:["#4caf50","#81c784","#ffffff"]}),this.activeReminder.set(null),this.showNextReminder()}snoozeReminder(n){let e=new Date;e.setMinutes(e.getMinutes()+30);let t=JSON.parse(localStorage.getItem(this.REMINDERS_KEY)||"[]");t.push(z(C({},n),{remindAt:e.toISOString()})),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t)),this.activeReminder.set(null),this.showNextReminder()}checkForUpdates(){this.updates.isEnabled&&(this.updates.versionUpdates.pipe(y(n=>n.type==="VERSION_READY")).subscribe(()=>{this.snackBar.open("A new version is available!","Okay, thank you!",{duration:0,horizontalPosition:"center",verticalPosition:"bottom"}).onAction().subscribe(()=>{this.updates.activateUpdate().then(()=>{window.location.reload()})})}),window.addEventListener("online",()=>{this.updates.checkForUpdate().catch(n=>console.error(n))}),setTimeout(()=>{navigator.onLine&&this.updates.checkForUpdate().catch(n=>console.error(n))},5e3))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"bottom-nav"],[3,"itemName","humanReadableTime","futureValue","yearsToRetirement"],[3,"decision","close","itemName","humanReadableTime","futureValue","yearsToRetirement"]],template:function(e,t){if(e&1&&(ae(0,"router-outlet")(1,"app-selector",0),re(2,Ye,1,4,"app-decision-modal",1)),e&2){let o;ee(2),ne((o=t.activeReminder())?2:-1,o)}},dependencies:[ge,D,x,O,De,N,ve,Re],styles:[".bottom-nav[_ngcontent-%COMP%]{display:block;position:fixed;bottom:0;left:0;width:100%;height:64px;z-index:1000;background:#fff}"]})};be(k,Ae).catch(r=>console.error(r));
