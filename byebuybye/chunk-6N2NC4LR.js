import{a as N,b as V}from"./chunk-T2HF554B.js";import{a as k,b as Y,c as F,d as A,e as K}from"./chunk-AXFDJPD5.js";import{a as z}from"./chunk-QXHB2BIB.js";import{q as J,r as $}from"./chunk-KH7ATXE2.js";import{Ca as h,Eb as P,Fb as v,Gb as D,Na as C,Oa as M,Qa as b,Ra as O,Sa as y,Ta as n,Ua as o,Va as _,X as d,Y as l,Za as f,_a as u,ab as c,jb as s,kb as E,lb as S,mb as T,ob as g,pb as w,qb as I,sa as p}from"./chunk-NDTBUUH6.js";var L=(m,t)=>t.id;function q(m,t){if(m&1){let e=f();n(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title")(3,"strong"),s(4),o(),_(5,"br"),n(6,"small"),s(7),g(8,"currency"),o()(),n(9,"button",6),u("click",function(){let r=d(e).$implicit,a=c();return l(a.deleteReminder(r.id))}),n(10,"mat-icon"),s(11,"delete"),o()()(),n(12,"mat-card-content")(13,"p",7)(14,"mat-icon"),s(15,"notifications_active"),o(),s(16),g(17,"date"),o()(),n(18,"mat-card-actions",8)(19,"button",9),u("click",function(){let r=d(e).$implicit,a=c();return l(a.openReminder(r))}),s(20,"DECIDE"),o(),n(21,"button",6),u("click",function(){let r=d(e).$implicit,a=c();return l(a.deleteReminder(r.id))}),n(22,"mat-icon"),s(23,"delete"),o()()()()}if(m&2){let e=t.$implicit;p(4),E(e.itemName||"Unnamed Item"),p(3),T("Price: ",w(8,4,e.price)," (",e.formattedTime,")"),p(9),S(" Reminder set for: ",I(17,6,e.remindAt,"short")," ")}}function H(m,t){m&1&&(n(0,"div",3)(1,"mat-icon"),s(2,"timer_off"),o(),n(3,"p"),s(4,"No active reminders. You're making quick decisions today!"),o()())}function U(m,t){if(m&1){let e=f();n(0,"app-decision-modal",10),u("decision",function(r){d(e);let a=c();return l(a.resolveReminder(a.selectedReminder,r))})("close",function(){d(e);let r=c();return l(r.selectedReminder=null)}),o()}if(m&2){let e=c();y("itemName",e.selectedReminder.itemName)("humanReadableTime",e.selectedReminder.formattedTime)("futureValue",e.futureValue)("yearsToRetirement",e.yearsToRetirement)}}var B=class m{reminders=[];selectedReminder=null;futureValue=0;yearsToRetirement=0;REMINDERS_KEY="purchase_reminders";DECISIONS_KEY="purchase_decisions";PROFILE_KEY="user_financial_profile";ngOnInit(){this.loadReminders()}loadReminders(){let t=localStorage.getItem(this.REMINDERS_KEY);t&&(this.reminders=JSON.parse(t).sort((e,i)=>new Date(e.remindAt).getTime()-new Date(i.remindAt).getTime()))}openReminder(t){this.selectedReminder=t,this.calculateOpportunityCost(t.price)}calculateOpportunityCost(t){let e=JSON.parse(localStorage.getItem(this.PROFILE_KEY)||"{}"),i=(e.investmentReturn||7)/100;if(e.birthDate&&e.retirementAge){let r=new Date(e.birthDate),a=new Date,x=a.getFullYear()-r.getFullYear(),R=a.getMonth()-r.getMonth();(R<0||R===0&&a.getDate()<r.getDate())&&x--,this.yearsToRetirement=e.retirementAge-x,this.yearsToRetirement>0?this.futureValue=t*Math.pow(1+i,this.yearsToRetirement):this.futureValue=0}}resolveReminder(t,e){let i=JSON.parse(localStorage.getItem(this.DECISIONS_KEY)||"[]");i.push({itemName:t.itemName,price:t.price,hours:t.hours,formattedTime:t.formattedTime,bought:e,date:new Date().toISOString()}),localStorage.setItem(this.DECISIONS_KEY,JSON.stringify(i)),e||N({particleCount:150,spread:70,origin:{y:.6},colors:["#4caf50","#81c784","#ffffff"]}),this.deleteReminder(t.id),this.selectedReminder=null}deleteReminder(t){this.reminders=this.reminders.filter(e=>e.id!==t),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(this.reminders))}static \u0275fac=function(e){return new(e||m)};static \u0275cmp=h({type:m,selectors:[["app-reminders"]],decls:9,vars:2,consts:[[1,"reminders-container"],[1,"cards-list"],["appearance","outlined",1,"reminder-card"],[1,"empty-msg"],[3,"itemName","humanReadableTime","futureValue","yearsToRetirement"],[1,"bottom-spacer"],["mat-icon-button","",1,"delete-btn",3,"click"],[1,"due-info"],["align","end"],["mat-button","",3,"click"],[3,"decision","close","itemName","humanReadableTime","futureValue","yearsToRetirement"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"h1"),s(2,"Active Reminders"),o(),n(3,"div",1),b(4,q,24,9,"mat-card",2,L,!1,H,5,0,"div",3),o()(),C(7,U,1,4,"app-decision-modal",4),_(8,"div",5)),e&2&&(p(4),O(i.reminders),p(3),M(i.selectedReminder?7:-1))},dependencies:[D,k,K,Y,F,A,$,J,z,V,v,P],styles:["[_nghost-%COMP%]{display:block;width:100%}.reminders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px 0;gap:16px}h1[_ngcontent-%COMP%]{text-align:center;font-family:Roboto,sans-serif;margin-bottom:8px}.cards-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.reminder-card[_ngcontent-%COMP%]{width:90vw;max-width:500px;border-left:5px solid #6c757d}.reminder-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px}mat-card-title[_ngcontent-%COMP%]{font-size:1rem!important}mat-card-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.due-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#555;font-size:.9rem;margin:0 16px}.due-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#ff9800}.delete-btn[_ngcontent-%COMP%]{margin-left:auto}.buy-btn[_ngcontent-%COMP%]{color:#4caf50!important;font-weight:700!important}.save-btn[_ngcontent-%COMP%]{color:#f44336!important;font-weight:700!important}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#888;margin-top:3rem;display:flex;flex-direction:column;align-items:center;gap:10px}.empty-msg[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.bottom-spacer[_ngcontent-%COMP%]{height:80px}"]})};export{B as Reminders};
