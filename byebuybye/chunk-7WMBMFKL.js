import{a as N,b as V}from"./chunk-T2HF554B.js";import{a as Y,b as k,c as A,d as F,e as K}from"./chunk-AXFDJPD5.js";import{a as z}from"./chunk-QXHB2BIB.js";import{q as J,r as B}from"./chunk-KH7ATXE2.js";import{Ca as h,Eb as v,Fb as w,Gb as D,Na as C,Oa as M,Qa as O,Ra as b,Sa as y,Ta as n,Ua as r,Va as f,X as l,Y as p,Za as _,_a as u,ab as d,jb as s,kb as E,lb as S,mb as I,ob as g,pb as P,qb as T,sa as c}from"./chunk-NDTBUUH6.js";var L=(o,t)=>t.id;function q(o,t){if(o&1){let e=_();n(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title")(3,"strong"),s(4),r(),f(5,"br"),n(6,"small"),s(7),g(8,"currency"),r()(),n(9,"button",6),u("click",function(){let a=l(e).$implicit,m=d();return p(m.deleteReminder(a.id))}),n(10,"mat-icon"),s(11,"delete"),r()()(),n(12,"mat-card-content")(13,"p",7)(14,"mat-icon"),s(15,"notifications_active"),r(),s(16),g(17,"date"),r()(),n(18,"mat-card-actions",8)(19,"button",9),u("click",function(){let a=l(e).$implicit,m=d();return p(m.openReminder(a))}),s(20,"DECIDE"),r()()()}if(o&2){let e=t.$implicit;c(4),E(e.itemName||"Unnamed Item"),c(3),I("Price: ",P(8,4,e.price)," (",e.formattedTime,")"),c(9),S(" Reminder set for: ",T(17,6,e.remindAt,"short")," ")}}function H(o,t){o&1&&(n(0,"div",3)(1,"mat-icon"),s(2,"timer_off"),r(),n(3,"p"),s(4,"No active reminders. You're making quick decisions today!"),r()())}function U(o,t){if(o&1){let e=_();n(0,"app-decision-modal",10),u("decision",function(a){l(e);let m=d();return p(m.resolveReminder(m.selectedReminder,a))})("close",function(){l(e);let a=d();return p(a.selectedReminder=null)}),r()}if(o&2){let e=d();y("itemName",e.selectedReminder.itemName)("humanReadableTime",e.selectedReminder.formattedTime)("futureValue",e.futureValue)("yearsToRetirement",e.yearsToRetirement)}}var $=class o{reminders=[];selectedReminder=null;futureValue=0;yearsToRetirement=0;REMINDERS_KEY="purchase_reminders";DECISIONS_KEY="purchase_decisions";PROFILE_KEY="user_financial_profile";ngOnInit(){this.loadReminders()}loadReminders(){let t=localStorage.getItem(this.REMINDERS_KEY);t&&(this.reminders=JSON.parse(t).sort((e,i)=>new Date(e.remindAt).getTime()-new Date(i.remindAt).getTime()))}openReminder(t){this.selectedReminder=t,this.calculateOpportunityCost(t.price)}calculateOpportunityCost(t){let e=JSON.parse(localStorage.getItem(this.PROFILE_KEY)||"{}"),i=(e.investmentReturn||7)/100;if(e.birthDate&&e.retirementAge){let a=new Date(e.birthDate),m=new Date,R=m.getFullYear()-a.getFullYear(),x=m.getMonth()-a.getMonth();(x<0||x===0&&m.getDate()<a.getDate())&&R--,this.yearsToRetirement=e.retirementAge-R,this.yearsToRetirement>0?this.futureValue=t*Math.pow(1+i,this.yearsToRetirement):this.futureValue=0}}resolveReminder(t,e){let i=JSON.parse(localStorage.getItem(this.DECISIONS_KEY)||"[]");i.push({itemName:t.itemName,price:t.price,hours:t.hours,formattedTime:t.formattedTime,bought:e,date:new Date().toISOString()}),localStorage.setItem(this.DECISIONS_KEY,JSON.stringify(i)),e||N({particleCount:150,spread:70,origin:{y:.6},colors:["#4caf50","#81c784","#ffffff"]}),this.deleteReminder(t.id),this.selectedReminder=null}deleteReminder(t){this.reminders=this.reminders.filter(e=>e.id!==t),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(this.reminders))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-reminders"]],decls:9,vars:2,consts:[[1,"reminders-container"],[1,"cards-list"],["appearance","outlined",1,"reminder-card"],[1,"empty-msg"],[3,"itemName","humanReadableTime","futureValue","yearsToRetirement"],[1,"bottom-spacer"],["mat-icon-button","",1,"delete-btn",3,"click"],[1,"due-info"],["align","end"],["mat-button","",3,"click"],[3,"decision","close","itemName","humanReadableTime","futureValue","yearsToRetirement"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"h1"),s(2,"Active Reminders"),r(),n(3,"div",1),O(4,q,21,9,"mat-card",2,L,!1,H,5,0,"div",3),r()(),C(7,U,1,4,"app-decision-modal",4),f(8,"div",5)),e&2&&(c(4),b(i.reminders),c(3),M(i.selectedReminder?7:-1))},dependencies:[D,Y,K,k,A,F,B,J,z,V,w,v],styles:["[_nghost-%COMP%]{display:block;width:100%}.reminders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px 0;gap:16px}h1[_ngcontent-%COMP%]{text-align:center;font-family:Roboto,sans-serif;margin-bottom:8px}.cards-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.reminder-card[_ngcontent-%COMP%]{width:90vw;max-width:500px;border-left:5px solid #6c757d}.reminder-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px}mat-card-title[_ngcontent-%COMP%]{font-size:1rem!important}mat-card-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.due-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#555;font-size:.9rem;margin:0 16px}.due-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#ff9800}.delete-btn[_ngcontent-%COMP%]{margin-left:auto}.buy-btn[_ngcontent-%COMP%]{color:#4caf50!important;font-weight:700!important}.save-btn[_ngcontent-%COMP%]{color:#f44336!important;font-weight:700!important}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#888;margin-top:3rem;display:flex;flex-direction:column;align-items:center;gap:10px}.empty-msg[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.bottom-spacer[_ngcontent-%COMP%]{height:80px}"]})};export{$ as Reminders};
