import{a as M,b as j,c as $,e as G,f as J}from"./chunk-AXFDJPD5.js";import{a as L}from"./chunk-QXHB2BIB.js";import{q}from"./chunk-KH7ATXE2.js";import{Ca as x,Db as B,Eb as K,Fb as h,Gb as V,Na as b,Oa as _,Pa as T,Qa as N,Ra as H,Sa as d,Ta as a,Ua as l,Va as u,X as E,Y as D,Za as F,_a as Y,ab as m,hb as k,jb as c,kb as p,lb as R,mb as A,ob as g,pb as y,qb as z,sa as o,ub as C}from"./chunk-NDTBUUH6.js";var v=class e{label=C("");amount=C(0);type=C("saved");static \u0275fac=function(t){return new(t||e)};static \u0275cmp=x({type:e,selectors:[["app-moneybox"]],inputs:{label:[1,"label"],amount:[1,"amount"],type:[1,"type"]},decls:8,vars:6,consts:[[1,"money-box-card",3,"ngClass"],[1,"moneybox",3,"ngClass"],[1,"label"],[1,"amount"]],template:function(t,i){t&1&&(a(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2),c(4),l(),a(5,"div",3),c(6),g(7,"currency"),l()()()()),t&2&&(d("ngClass",i.type()),o(2),d("ngClass",i.type()),o(2),p(i.label()),o(2),p(y(7,4,i.amount())))},dependencies:[B,J,M,$,h],styles:["[_nghost-%COMP%]{display:block;margin:0;width:100%}.money-box-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px!important;text-align:center}.label[_ngcontent-%COMP%]{font-size:.75rem;color:#666;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}.amount[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:800}.money-box-card[_ngcontent-%COMP%]{border-radius:12px;transition:transform .2s ease;border-left:8px solid transparent}.saved[_ngcontent-%COMP%]{border-left-color:#4caf50!important;background-color:#f1f8e9!important}.saved[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#2e7d32}.spent[_ngcontent-%COMP%]{border-left-color:#f44336!important;background-color:#ffebee!important}.spent[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#c62828}.invested[_ngcontent-%COMP%]{border-left-color:#fbc02d!important;background-color:#fffde7!important}.invested[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#f57f17}.invested[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#f57f17;opacity:.8}"]})};function Z(e,n){if(e&1&&(a(0,"div",1),u(1,"app-moneybox",7)(2,"app-moneybox",8),l()),e&2){let t=m();o(),d("amount",t.totalSaved),o(),d("amount",t.totalIfInvested)}}function tt(e,n){if(e&1&&u(0,"app-moneybox",2),e&2){let t=m();d("amount",t.totalSpent)}}function et(e,n){if(e&1&&(c(0," You SPENT "),a(1,"strong"),c(2),g(3,"currency"),l()),e&2){let t=m().$implicit;o(2),p(y(3,1,t.price))}}function nt(e,n){if(e&1&&(c(0," You SAVED "),a(1,"strong"),c(2),g(3,"currency"),l()),e&2){let t=m().$implicit;o(2),p(y(3,1,t.price))}}function it(e,n){if(e&1){let t=F();a(0,"mat-card",9)(1,"mat-card-header")(2,"mat-card-title"),b(3,et,4,3)(4,nt,4,3),c(5),g(6,"date"),u(7,"br"),a(8,"small"),c(9),l()(),a(10,"button",10),Y("click",function(){let s=E(t).$index,r=m();return D(r.deleteDecision(s))}),a(11,"mat-icon"),c(12,"delete"),l()()()()}if(e&2){let t=n.$implicit;k("bought-card",t.bought)("saved-card",!t.bought),o(3),_(t.bought?3:4),o(2),R(" on ",z(6,8,t.date,"yyyy-MM-dd"),"! "),o(4),A(" ",t.itemName?t.itemName:"Item"," = ",t.formattedTime," of work. ")}}function ot(e,n){e&1&&(a(0,"p",5),c(1,'No history yet. Start by adding items in the "New" tab!'),l())}var Q=class e{decisions=[];totalSaved=0;totalSpent=0;totalIfInvested=0;STORAGE_KEY="purchase_decisions";PROFILE_KEY="user_financial_profile";ngOnInit(){this.loadHistory()}loadHistory(){let n=localStorage.getItem(this.STORAGE_KEY);n&&(this.decisions=JSON.parse(n).reverse(),this.calculateTotals())}calculateTotals(){let n=JSON.parse(localStorage.getItem(this.PROFILE_KEY)||"{}"),t=(n.investmentReturn||7)/100,i=n.retirementAge||65,s=n.birthDate?new Date(n.birthDate):null;this.totalSaved=this.decisions.filter(r=>!r.bought).reduce((r,f)=>r+Number(f.price||0),0),this.totalSpent=this.decisions.filter(r=>r.bought).reduce((r,f)=>r+Number(f.price||0),0),this.totalIfInvested=this.decisions.filter(r=>!r.bought).reduce((r,f)=>{let w=Number(f.price||0),O=0;if(s){let P=new Date,S=P.getFullYear()-s.getFullYear(),I=P.getMonth()-s.getMonth();(I<0||I===0&&P.getDate()<s.getDate())&&S--,O=i-S}let U=O>0?w*Math.pow(1+t,O):w;return r+U},0)}deleteDecision(n){let t=localStorage.getItem(this.STORAGE_KEY);if(t){let i=JSON.parse(t),s=i.length-1-n;i.splice(s,1),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),this.loadHistory()}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=x({type:e,selectors:[["app-history"]],decls:10,vars:3,consts:[[1,"history-header-container"],[1,"moneybox-row"],["label","Total money spent","type","spent",3,"amount"],[1,"cards-list"],["appearance","outlined",1,"money-card",3,"bought-card","saved-card"],[1,"empty-msg"],[1,"bottom-spacer"],["label","Saved","type","saved",3,"amount"],["label","Invested Value","type","invested",3,"amount"],["appearance","outlined",1,"money-card"],["mat-icon-button","",1,"delete-btn",3,"click"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"h1"),c(2,"Your History"),l(),b(3,Z,3,2,"div",1),b(4,tt,1,1,"app-moneybox",2),a(5,"div",3),N(6,it,13,11,"mat-card",4,T,!1,ot,2,0,"p",5),l()(),u(9,"div",6)),t&2&&(o(3),_(i.totalSaved>0?3:-1),o(),_(i.totalSpent>0?4:-1),o(2),H(i.decisions))},dependencies:[V,M,G,j,L,q,v,h,K],styles:["[_nghost-%COMP%]{display:block;width:100%}.money-card[_ngcontent-%COMP%]{width:95vw}.money-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;padding:8px 16px;box-sizing:border-box}  .money-card .mat-card-header-text{margin:0!important;display:flex;align-items:center}.money-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0!important;line-height:1}.delete-btn[_ngcontent-%COMP%]{margin-left:auto;display:flex!important;align-items:center;justify-content:center;width:40px!important;height:40px!important}.delete-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0!important}h1[_ngcontent-%COMP%]{text-align:center;width:100%;margin:16px 0;font-family:Roboto,sans-serif}.history-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;gap:12px;padding:20px 0 100px}.moneybox-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:stretch;gap:8px;width:95%;max-width:500px}.moneybox-row[_ngcontent-%COMP%]   app-moneybox[_ngcontent-%COMP%]{flex:1;margin:0;width:100%}.history-header-container[_ngcontent-%COMP%] > app-moneybox[_ngcontent-%COMP%]{width:95%;max-width:500px;margin:0}.cards-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:12px;padding-bottom:20px}.money-card[_ngcontent-%COMP%]{width:90vw;max-width:500px}.saved-card[_ngcontent-%COMP%]{border-left:5px solid #4caf50}.bought-card[_ngcontent-%COMP%]{border-left:5px solid #f44336;opacity:.8}.empty-msg[_ngcontent-%COMP%]{text-align:center;color:#666;margin-top:2rem}.bottom-spacer[_ngcontent-%COMP%]{height:80px;width:100%}mat-card-title[_ngcontent-%COMP%]{font-size:1rem!important;font-weight:400!important}mat-card-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem}mat-card-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}"]})};export{Q as History};
