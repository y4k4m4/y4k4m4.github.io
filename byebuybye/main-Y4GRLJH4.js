import{a as ke,b as Oe}from"./chunk-56GSYNL6.js";import{a as ye,c as Me,d as Ee,e as xe}from"./chunk-DDQ4ZNGR.js";import{a as _e}from"./chunk-I25BBKAA.js";import{a as Se,b as I}from"./chunk-TITNLOX4.js";import{b as Ce,f as Re,r as N,s as P}from"./chunk-VG43LYMX.js";import{e as be,h as ve,j as we}from"./chunk-52L5DIHH.js";import{$ as te,$a as se,A as g,Ab as fe,Bb as he,Cb as s,Db as H,Ga as O,I as M,L as h,M as q,O as L,P as F,Qb as ge,R as $,S as V,T as d,Ta as b,U as X,Ua as z,Va as ie,Y as R,Ya as ae,Z as k,_ as ee,a as _,b as Z,bb as W,da as oe,e as C,f as S,ga as re,ha as B,ib as ce,jb as c,kb as l,lb as K,n as f,na as ne,pb as le,sb as D,tb as T,u as p,ub as de,v as y,vb as Y,wb as me,yb as pe,zb as ue}from"./chunk-4Y5VCLLF.js";var De=[{path:"",loadComponent:()=>import("./chunk-KCDRRHI4.js").then(o=>o.New)},{path:"donate",loadComponent:()=>import("./chunk-B6UH43TK.js").then(o=>o.Donate)},{path:"history",loadComponent:()=>import("./chunk-2V6A4MHO.js").then(o=>o.History)},{path:"profile",loadComponent:()=>import("./chunk-KS3XQV4U.js").then(o=>o.Home)},{path:"new",loadComponent:()=>import("./chunk-KCDRRHI4.js").then(o=>o.New)},{path:"reminders",loadComponent:()=>import("./chunk-XB4CWQBK.js").then(o=>o.Reminders)}];var Q="Service workers are disabled or not supported by this browser",v=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new C(t=>t.error(new h(5601,!1)));else{let t=null,r=new S;this.worker=new C(m=>(t!==null&&m.next(t),r.subscribe(x=>m.next(x))));let i=()=>{let{controller:m}=n;m!==null&&(t=m,r.next(t))};n.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(M(()=>n.getRegistration().then(m=>{if(!m)throw new h(5601,!1);return m})));let a=new S;this.events=a.asObservable();let u=m=>{let{data:x}=m;x?.type&&a.next(x)};n.addEventListener("message",u),e?.get(W,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",i),n.removeEventListener("message",u)})}}postMessage(n,e){return new Promise(t=>{this.worker.pipe(g(1)).subscribe(r=>{r.postMessage(_({action:n},e)),t()})})}postMessageWithOperation(n,e,t){let r=this.waitForOperationCompleted(t),i=this.postMessage(n,e);return Promise.all([i,r]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let e;return typeof n=="string"?e=t=>t.type===n:e=t=>n.includes(t.type),this.events.pipe(y(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(g(1))}waitForOperationCompleted(n){return new Promise((e,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(y(r=>r.nonce===n),g(1),f(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:e,error:t})})}get isEnabled(){return!!this.serviceWorker}},Ue=(()=>{class o{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new S;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=p,this.notificationClicks=p,this.notificationCloses=p,this.pushSubscriptionChanges=p,this.subscription=p;return}this.messages=this.sw.eventsOfType("PUSH").pipe(f(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(f(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(f(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(f(r=>r.data)),this.pushManager=this.sw.registration.pipe(f(r=>r.pushManager));let t=this.pushManager.pipe(M(r=>r.getSubscription()));this.subscription=new C(r=>{let i=t.subscribe(r),a=this.subscriptionChanges.subscribe(r);return()=>{i.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Q));let t={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return t.applicationServerKey=i,new Promise((a,u)=>{this.pushManager.pipe(M(w=>w.subscribe(t)),g(1)).subscribe({next:w=>{this.subscriptionChanges.next(w),a(w)},error:u})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Q));let e=t=>{if(t===null)throw new h(5602,!1);return t.unsubscribe().then(r=>{if(!r)throw new h(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,r)=>{this.subscription.pipe(g(1),M(e)).subscribe({next:t,error:r})})}decodeBase64(e){return atob(e)}static \u0275fac=function(t){return new(t||o)(V(v))};static \u0275prov=L({token:o,factory:o.\u0275fac})}return o})(),G=(()=>{class o{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=p,this.unrecoverable=p;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Q));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new h(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(t){return new(t||o)(V(v))};static \u0275prov=L({token:o,factory:o.\u0275fac})}return o})(),Ie=new $("");function je(){let o=d(E);if(!("serviceWorker"in navigator&&o.enabled!==!1))return;let n=d(Ie),e=d(oe),t=d(W);e.runOutsideAngular(()=>{let r=navigator.serviceWorker,i=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",i),t.onDestroy(()=>{r.removeEventListener("controllerchange",i)})}),e.runOutsideAngular(()=>{let r,{registrationStrategy:i}=o;if(typeof i=="function")r=new Promise(a=>i().subscribe(()=>a()));else{let[a,...u]=(i||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Te(+u[0]||0);break;case"registerWhenStable":r=Promise.race([t.whenStable(),Te(+u[0])]);break;default:throw new h(5600,!1)}}r.then(()=>{t.destroyed||navigator.serviceWorker.register(n,{scope:o.scope,updateViaCache:o.updateViaCache,type:o.type}).catch(a=>console.error(q(5604,!1)))})})}function Te(o){return new Promise(n=>setTimeout(n,o))}function Le(){let o=d(E),n=d(ee),e=!0;return new v(e&&o.enabled!==!1?navigator.serviceWorker:void 0,n)}var E=class{enabled;updateViaCache;type;scope;registrationStrategy};function Ne(o,n={}){return X([Ue,G,{provide:Ie,useValue:o},{provide:E,useValue:n},{provide:v,useFactory:Le},se(je)])}var Pe={providers:[re(),xe(De),Ne("ngsw-worker.js",{enabled:!ge(),registrationStrategy:"registerImmediately"})]};var Fe=["*",[["mat-toolbar-row"]]],Ve=["*","mat-toolbar-row"],Be=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275dir=ie({type:o,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return o})(),Ae=(()=>{class o{_elementRef=d(ne);_platform=d(Re);_document=d(te);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(t&1&&me(i,Be,5),t&2){let a;pe(a=ue())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(t,r){t&2&&(he(r.color?"mat-"+r.color:""),fe("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Ve,decls:2,vars:0,template:function(t,r){t&1&&(de(Fe),Y(0),Y(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return o})();var A=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=z({type:o});static \u0275inj=F({imports:[Ce]})}return o})();var U=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-selector"]],decls:25,vars:0,consts:[["color","primary",1,"bottom-nav"],["mat-button","","routerLink","/reminders","routerLinkActive","active"],[1,"selector-container"],[1,"selector-icon"],[1,"selector-label"],["mat-button","","routerLink","/history","routerLinkActive","active"],["mat-button","","routerLink","/new","routerLinkActive","active"],["mat-button","","routerLink","/profile","routerLinkActive","active"]],template:function(e,t){e&1&&(c(0,"mat-toolbar",0)(1,"a",1)(2,"div",2)(3,"mat-icon",3),s(4,"alarm"),l(),c(5,"span",4),s(6,"Reminders"),l()()(),c(7,"a",5)(8,"div",2)(9,"mat-icon",3),s(10,"history"),l(),c(11,"span",4),s(12,"History"),l()()(),c(13,"a",6)(14,"div",2)(15,"mat-icon",3),s(16,"add"),l(),c(17,"span",4),s(18,"New"),l()()(),c(19,"a",7)(20,"div",2)(21,"mat-icon",3),s(22,"account_circle"),l(),c(23,"span",4),s(24,"Profile"),l()()()())},dependencies:[A,Ae,P,N,I,Se,Me,Ee],styles:[".bottom-nav[_ngcontent-%COMP%]{height:100%!important;width:100%;display:flex;justify-content:space-around;padding:0}.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#00bcd4!important;color:#fff!important}.selector-icon[_ngcontent-%COMP%]{font-size:24px;text-align:center}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-of-type{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{border-top-right-radius:0!important;border-bottom-right-radius:0!important}"]})};function Ye(o,n){if(o&1){let e=le();c(0,"div",2)(1,"div",3)(2,"h3"),s(3,"Still want it?"),l(),c(4,"p"),s(5," Remember "),c(6,"strong"),s(7),l(),s(8,"? "),K(9,"br"),s(10," It costs "),c(11,"strong"),s(12),l(),s(13," of your work. "),l(),c(14,"div",4)(15,"button",5),D("click",function(){R(e);let r=T();return k(r.resolveReminder(!0))}),s(16," Yes, I'll buy it "),l(),c(17,"button",6),D("click",function(){R(e);let r=T();return k(r.resolveReminder(!1))}),s(18," No, I'll skip it "),l(),c(19,"button",7),D("click",function(){let r=R(e).ngIf,i=T();return k(i.snoozeReminder(r))}),s(20," Snooze (30m) "),l()()()()}if(o&2){let e=n.ngIf;O(7),H(e.itemName||"this item"),O(5),H(e.formattedTime)}}var j=class o{title=B("byebuybye");updates=d(G);snackBar=d(ke);activeReminder=B(null);reminderQueue=[];REMINDERS_KEY="purchase_reminders";DECISIONS_KEY="purchase_decisions";constructor(){this.checkForUpdates(),this.startReminderCheck()}startReminderCheck(){setInterval(()=>{let n=localStorage.getItem(this.REMINDERS_KEY);if(!n)return;let e=JSON.parse(n),t=new Date,r=e.filter(i=>new Date(i.remindAt)<=t);if(r.length>0){let i=e.filter(a=>new Date(a.remindAt)>t);localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(i)),this.reminderQueue.push(...r),this.showNextReminder()}},5e3)}showNextReminder(){!this.activeReminder()&&this.reminderQueue.length>0&&this.activeReminder.set(this.reminderQueue.shift())}resolveReminder(n){let e=this.activeReminder();if(!e)return;let t=JSON.parse(localStorage.getItem(this.DECISIONS_KEY)||"[]");t.push({itemName:e.itemName,price:e.price,hours:e.hours,formattedTime:e.formattedTime,bought:n,date:new Date().toISOString()}),localStorage.setItem(this.DECISIONS_KEY,JSON.stringify(t)),n||_e({particleCount:150,spread:70,origin:{y:.6},colors:["#4caf50","#81c784","#ffffff"]}),this.activeReminder.set(null),this.showNextReminder()}snoozeReminder(n){let e=new Date;e.setMinutes(e.getMinutes()+30);let t=JSON.parse(localStorage.getItem(this.REMINDERS_KEY)||"[]");t.push(Z(_({},n),{remindAt:e.toISOString()})),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t)),this.activeReminder.set(null),this.showNextReminder()}checkForUpdates(){this.updates.isEnabled&&(this.updates.versionUpdates.pipe(y(n=>n.type==="VERSION_READY")).subscribe(()=>{this.snackBar.open("A new version is available!","Okay, thank you!",{duration:0,horizontalPosition:"center",verticalPosition:"bottom"}).onAction().subscribe(()=>{this.updates.activateUpdate().then(()=>{window.location.reload()})})}),window.addEventListener("online",()=>{this.updates.checkForUpdate().catch(n=>console.error(n))}),setTimeout(()=>{navigator.onLine&&this.updates.checkForUpdate().catch(n=>console.error(n))},5e3))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-root"]],decls:3,vars:1,consts:[["color","primary",1,"bottom-nav"],["class","reminder-overlay",4,"ngIf"],[1,"reminder-overlay"],[1,"reminder-card"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-button","",3,"click"]],template:function(e,t){e&1&&(K(0,"router-outlet")(1,"app-selector",0),ae(2,Ye,21,2,"div",1)),e&2&&(O(2),ce("ngIf",t.activeReminder()))},dependencies:[ve,be,P,N,I,A,Oe,U,ye],styles:[".bottom-nav[_ngcontent-%COMP%]{display:block;position:fixed;bottom:0;left:0;width:100%;height:64px;z-index:1000;background:#fff}.reminder-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000bf;display:flex;justify-content:center;align-items:center;z-index:2000;padding:20px;box-sizing:border-box;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.reminder-card[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:20px;max-width:350px;width:100%;box-shadow:0 10px 40px #0006;text-align:center}.item-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:1rem 0}.cost-info[_ngcontent-%COMP%]{margin-bottom:2rem;color:#666}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.buy-btn[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%], .remind-btn[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;border:none;font-weight:700;cursor:pointer}.buy-btn[_ngcontent-%COMP%]{background:#eee;color:#333}.save-btn[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.remind-btn[_ngcontent-%COMP%]{background:transparent;color:#666}"]})};we(j,Pe).catch(o=>console.error(o));
