import{a as Te,b as De}from"./chunk-QORNORT3.js";import{a as ve,c as we,d as ye,e as Me}from"./chunk-Q4VWBOSX.js";import{a as Ee}from"./chunk-3QMW56PD.js";import{a as Ce,b as k}from"./chunk-QXHB2BIB.js";import{b as Re,f as Se,r as _e,s as N}from"./chunk-KH7ATXE2.js";import{A as w,Ca as y,Da as K,Ea as oe,Gb as ge,I as C,Ib as be,Ja as re,L as g,La as Y,M as H,Na as ie,O as U,Oa as ne,P as F,R as G,S as V,Sa as v,T as c,Ta as d,U as q,Ua as m,Va as ae,X as j,Y as W,Z as $,Za as se,_ as X,_a as ce,a as E,ab as O,b as L,bb as le,ca as x,cb as z,db as de,e as T,f as D,fa as ee,fb as me,ga as B,gb as pe,hb as ue,ib as he,jb as p,la as te,n as f,sa as b,u,v as R,vb as fe}from"./chunk-NDTBUUH6.js";var xe=[{path:"",loadComponent:()=>import("./chunk-B6QNDEKD.js").then(r=>r.New)},{path:"history",loadComponent:()=>import("./chunk-QLYT7MHX.js").then(r=>r.History)},{path:"profile",loadComponent:()=>import("./chunk-OOX4IMRX.js").then(r=>r.Profile)},{path:"new",loadComponent:()=>import("./chunk-B6QNDEKD.js").then(r=>r.New)},{path:"reminders",loadComponent:()=>import("./chunk-5B4CZQG5.js").then(r=>r.Reminders)},{path:"**",redirectTo:"new",pathMatch:"full"}];var J="Service workers are disabled or not supported by this browser",M=class{serviceWorker;worker;registration;events;constructor(i,e){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=new T(o=>o.error(new g(5601,!1)));else{let o=null,t=new D;this.worker=new T(l=>(o!==null&&l.next(o),t.subscribe(_=>l.next(_))));let n=()=>{let{controller:l}=i;l!==null&&(o=l,t.next(o))};i.addEventListener("controllerchange",n),n(),this.registration=this.worker.pipe(C(()=>i.getRegistration().then(l=>{if(!l)throw new g(5601,!1);return l})));let a=new D;this.events=a.asObservable();let s=l=>{let{data:_}=l;_?.type&&a.next(_)};i.addEventListener("message",s),e?.get(Y,null,{optional:!0})?.onDestroy(()=>{i.removeEventListener("controllerchange",n),i.removeEventListener("message",s)})}}postMessage(i,e){return new Promise(o=>{this.worker.pipe(w(1)).subscribe(t=>{t.postMessage(E({action:i},e)),o()})})}postMessageWithOperation(i,e,o){let t=this.waitForOperationCompleted(o),n=this.postMessage(i,e);return Promise.all([n,t]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=o=>o.type===i:e=o=>i.includes(o.type),this.events.pipe(R(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(w(1))}waitForOperationCompleted(i){return new Promise((e,o)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(R(t=>t.nonce===i),w(1),f(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).subscribe({next:e,error:o})})}get isEnabled(){return!!this.serviceWorker}},Pe=(()=>{class r{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new D;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=u,this.notificationClicks=u,this.notificationCloses=u,this.pushSubscriptionChanges=u,this.subscription=u;return}this.messages=this.sw.eventsOfType("PUSH").pipe(f(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(f(t=>t.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(f(t=>t.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(f(t=>t.data)),this.pushManager=this.sw.registration.pipe(f(t=>t.pushManager));let o=this.pushManager.pipe(C(t=>t.getSubscription()));this.subscription=new T(t=>{let n=o.subscribe(t),a=this.subscriptionChanges.subscribe(t);return()=>{n.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(J));let o={userVisibleOnly:!0},t=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),n=new Uint8Array(new ArrayBuffer(t.length));for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return o.applicationServerKey=n,new Promise((a,s)=>{this.pushManager.pipe(C(h=>h.subscribe(o)),w(1)).subscribe({next:h=>{this.subscriptionChanges.next(h),a(h)},error:s})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(J));let e=o=>{if(o===null)throw new g(5602,!1);return o.unsubscribe().then(t=>{if(!t)throw new g(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((o,t)=>{this.subscription.pipe(w(1),C(e)).subscribe({next:o,error:t})})}decodeBase64(e){return atob(e)}static \u0275fac=function(o){return new(o||r)(V(M))};static \u0275prov=U({token:r,factory:r.\u0275fac})}return r})(),Z=(()=>{class r{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=u,this.unrecoverable=u;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(J));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new g(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(o){return new(o||r)(V(M))};static \u0275prov=U({token:r,factory:r.\u0275fac})}return r})(),ke=new G("");function Le(){let r=c(S);if(!("serviceWorker"in navigator&&r.enabled!==!1))return;let i=c(ke),e=c(x),o=c(Y);e.runOutsideAngular(()=>{let t=navigator.serviceWorker,n=()=>t.controller?.postMessage({action:"INITIALIZE"});t.addEventListener("controllerchange",n),o.onDestroy(()=>{t.removeEventListener("controllerchange",n)})}),e.runOutsideAngular(()=>{let t,{registrationStrategy:n}=r;if(typeof n=="function")t=new Promise(a=>n().subscribe(()=>a()));else{let[a,...s]=(n||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":t=Promise.resolve();break;case"registerWithDelay":t=Oe(+s[0]||0);break;case"registerWhenStable":t=Promise.race([o.whenStable(),Oe(+s[0])]);break;default:throw new g(5600,!1)}}t.then(()=>{o.destroyed||navigator.serviceWorker.register(i,{scope:r.scope,updateViaCache:r.updateViaCache,type:r.type}).catch(a=>console.error(H(5604,!1)))})})}function Oe(r){return new Promise(i=>setTimeout(i,r))}function Ue(){let r=c(S),i=c($),e=!0;return new M(e&&r.enabled!==!1?navigator.serviceWorker:void 0,i)}var S=class{enabled;updateViaCache;type;scope;registrationStrategy};function Ne(r,i={}){return q([Pe,Z,{provide:ke,useValue:r},{provide:S,useValue:i},{provide:M,useFactory:Ue},re(Le)])}var Ie={providers:[ee(),Me(xe),Ne("ngsw-worker.js",{enabled:!fe(),registrationStrategy:"registerImmediately"})]};var Fe=["*",[["mat-toolbar-row"]]],Ve=["*","mat-toolbar-row"],je=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275dir=oe({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return r})(),Ae=(()=>{class r{_elementRef=c(te);_platform=c(Se);_document=c(X);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=y({type:r,selectors:[["mat-toolbar"]],contentQueries:function(o,t,n){if(o&1&&de(n,je,5),o&2){let a;me(a=pe())&&(t._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(o,t){o&2&&(he(t.color?"mat-"+t.color:""),ue("mat-toolbar-multiple-rows",t._toolbarRows.length>0)("mat-toolbar-single-row",t._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Ve,decls:2,vars:0,template:function(o,t){o&1&&(le(Fe),z(0),z(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return r})();var I=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=K({type:r});static \u0275inj=F({imports:[Re]})}return r})();var A=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-selector"]],decls:25,vars:4,consts:[["color","primary",1,"bottom-nav"],["mat-button","","routerLink","/reminders","routerLinkActive","active",3,"skipLocationChange"],[1,"selector-container"],[1,"selector-icon"],[1,"selector-label"],["mat-button","","routerLink","/history","routerLinkActive","active",3,"skipLocationChange"],["mat-button","","routerLink","/new","routerLinkActive","active",3,"skipLocationChange"],["mat-button","","routerLink","/profile","routerLinkActive","active",3,"skipLocationChange"]],template:function(e,o){e&1&&(d(0,"mat-toolbar",0)(1,"a",1)(2,"div",2)(3,"mat-icon",3),p(4,"alarm"),m(),d(5,"span",4),p(6,"Reminders"),m()()(),d(7,"a",5)(8,"div",2)(9,"mat-icon",3),p(10,"history"),m(),d(11,"span",4),p(12,"History"),m()()(),d(13,"a",6)(14,"div",2)(15,"mat-icon",3),p(16,"add"),m(),d(17,"span",4),p(18,"New"),m()()(),d(19,"a",7)(20,"div",2)(21,"mat-icon",3),p(22,"account_circle"),m(),d(23,"span",4),p(24,"Profile"),m()()()()),e&2&&(b(),v("skipLocationChange",!0),b(6),v("skipLocationChange",!0),b(6),v("skipLocationChange",!0),b(6),v("skipLocationChange",!0))},dependencies:[I,Ae,N,_e,k,Ce,we,ye],styles:[".bottom-nav[_ngcontent-%COMP%]{height:100%!important;width:100%;display:flex;justify-content:space-around;padding:0}.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#00bcd4!important;color:#fff!important}.selector-icon[_ngcontent-%COMP%]{font-size:24px;text-align:center}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-of-type{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{border-top-right-radius:0!important;border-bottom-right-radius:0!important}"]})};function Ke(r,i){if(r&1){let e=se();d(0,"app-decision-modal",2),ce("decision",function(t){j(e);let n=O();return W(n.resolveReminder(t))})("close",function(){let t=j(e),n=O();return W(n.snoozeReminder(t))}),m()}if(r&2){let e=i,o=O();v("itemName",e.itemName)("humanReadableTime",e.formattedTime)("futureValue",o.futureValue)("yearsToRetirement",o.yearsToRetirement)}}var P=class r{title=B("byebuybye");updates=c(Z);snackBar=c(Te);ngZone=c(x);activeReminder=B(null);futureValue=0;yearsToRetirement=0;reminderQueue=[];REMINDERS_KEY="purchase_reminders";DECISIONS_KEY="purchase_decisions";PROFILE_KEY="user_financial_profile";constructor(){this.checkForUpdates(),this.startReminderCheck()}startReminderCheck(){this.ngZone.runOutsideAngular(()=>{setInterval(()=>{let i=localStorage.getItem(this.REMINDERS_KEY);if(!i)return;let e=JSON.parse(i),o=new Date,t=e.filter(n=>{let a=new Date(n.remindAt)<=o,s=this.reminderQueue.some(l=>l.id===n.id),h=this.activeReminder()?.id===n.id;return a&&!s&&!h});t.length>0&&this.ngZone.run(()=>{this.reminderQueue.push(...t),this.showNextReminder()})},3e3)})}showNextReminder(){if(!this.activeReminder()&&this.reminderQueue.length>0){let i=this.reminderQueue.shift();this.calculateOpportunityCost(i.price),setTimeout(()=>this.activeReminder.set(i),0)}}calculateOpportunityCost(i){let e=JSON.parse(localStorage.getItem(this.PROFILE_KEY)||"{}"),o=(e.investmentReturn||7)/100;if(e.birthDate&&e.retirementAge){let t=new Date(e.birthDate),n=new Date,a=n.getFullYear()-t.getFullYear(),s=n.getMonth()-t.getMonth();(s<0||s===0&&n.getDate()<t.getDate())&&a--,this.yearsToRetirement=e.retirementAge-a,this.yearsToRetirement>0?this.futureValue=i*Math.pow(1+o,this.yearsToRetirement):this.futureValue=0}}resolveReminder(i){let e=this.activeReminder();if(!e)return;let o=JSON.parse(localStorage.getItem(this.DECISIONS_KEY)||"[]");o.push({itemName:e.itemName,price:e.price,hours:e.hours,formattedTime:e.formattedTime,bought:i,date:new Date().toISOString()}),localStorage.setItem(this.DECISIONS_KEY,JSON.stringify(o));let n=JSON.parse(localStorage.getItem(this.REMINDERS_KEY)||"[]").filter(a=>a.id!==e.id);if(localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(n)),!i){let a=new Date;a.setMinutes(a.getMinutes()+30);let s=JSON.parse(localStorage.getItem(this.REMINDERS_KEY)||"[]");s.push(L(E({},e),{remindAt:a.toISOString()})),localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(s)),this.activeReminder.set(null),this.showNextReminder()}}snoozeReminder(i){let e=new Date;e.setMinutes(e.getMinutes()+30);let t=JSON.parse(localStorage.getItem(this.REMINDERS_KEY)||"[]").map(n=>n.id===i.id?L(E({},n),{remindAt:e.toISOString()}):n);localStorage.setItem(this.REMINDERS_KEY,JSON.stringify(t)),this.activeReminder.set(null),this.showNextReminder()}checkForUpdates(){this.updates.isEnabled&&(this.updates.versionUpdates.pipe(R(i=>i.type==="VERSION_READY")).subscribe(()=>{this.snackBar.open("A new version is available!","Update Now",{duration:0,horizontalPosition:"center",verticalPosition:"bottom"}).onAction().subscribe(()=>{this.updates.activateUpdate().then(()=>{window.location.reload()})})}),window.addEventListener("online",()=>{this.updates.checkForUpdate()}),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.updates.checkForUpdate().catch(i=>console.error("SW Check Error:",i))},1e4),setInterval(()=>{navigator.onLine&&this.updates.checkForUpdate().catch(i=>console.error("SW Check Error:",i))},36e5)}))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"bottom-nav"],[3,"itemName","humanReadableTime","futureValue","yearsToRetirement"],[3,"decision","close","itemName","humanReadableTime","futureValue","yearsToRetirement"]],template:function(e,o){if(e&1&&(ae(0,"router-outlet")(1,"app-selector",0),ie(2,Ke,1,4,"app-decision-modal",1)),e&2){let t;b(2),ne((t=o.activeReminder())?2:-1,t)}},dependencies:[ge,N,k,I,De,A,ve,Ee],styles:[".bottom-nav[_ngcontent-%COMP%]{display:block;position:fixed;bottom:0;left:0;width:100%;height:64px;z-index:1000;background:#fff}"]})};be(P,Ie).catch(r=>console.error(r));
